<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order</title>
    <link rel="stylesheet" href="cart.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/css/bootstrap.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.11.6/umd/popper.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/js/bootstrap.min.js"></script>
    <style>
        /* Adiciona uma cor de fundo laranja para detalhes */
        .orange-detail {
            color: #ff7f00; /* Altere para o tom de laranja que preferir */
        }
    </style>
    <script>
        function updateTotal() {
            const items = document.querySelectorAll('.cart-item');
            let subtotal = 0;

            items.forEach(item => {
                const quantity = parseInt(item.querySelector('.quantity-input').value);
                const price = parseFloat(item.getAttribute('data-price'));
                const totalItemPrice = quantity * price;
                subtotal += totalItemPrice;

                // Atualiza o preço total do item
                item.querySelector('.item-total').textContent = 'R$ ' + totalItemPrice.toFixed(2);
            });

            // Atualiza o subtotal e o total
            document.getElementById('subtotal').textContent = 'R$ ' + subtotal.toFixed(2);
            document.getElementById('total').textContent = 'R$ ' + subtotal.toFixed(2); // Atualiza o total
        }

        document.addEventListener('DOMContentLoaded', () => {
            // Obtém os parâmetros da URL
            const urlParams = new URLSearchParams(window.location.search);
            const total = urlParams.get('total');

            // Converte o total para um número
            const totalValue = parseFloat(total);

            if (!isNaN(totalValue)) {
                // Atualiza o campo do total na página
                document.getElementById('total-display').textContent = 'R$ ' + totalValue.toFixed(2);
            } else {
                // Se totalValue não for um número, exibe uma mensagem de erro ou define um valor padrão
                document.getElementById('total-display').textContent = 'Erro ao carregar total';
            }

            // Atualiza o total ao carregar a página
            updateTotal();
        });

        // Adiciona evento de clique ao botão de pagamento
        window.onload = function() {
            const checkoutButton = document.querySelector('.custom-button');
            checkoutButton.addEventListener('click', function() {
                const total = document.getElementById('total').textContent;
                window.location.href = `index.html?total=${total}`;
            });
        };
    </script>
</head>
<body>
    <section class="h-100 h-custom" style="background-color: #eee;">
        <div class="container py-5 h-100">
            <div class="row d-flex justify-content-center align-items-center h-100">
                <div class="col">
                    <div class="card">
                        <div class="card-body p-4">
                            <div class="row">
                                <div class="col-lg-7">
                                    <h5 class="mb-3"><a href="#!" class="text-body"><i
                                        class="fas fa-long-arrow-alt-left me-2"></i>Continuar Comprando</a></h5>
                                    <hr>

                                    <div class="d-flex justify-content-between align-items-center mb-4">
                                        <div>
                                            <p class="mb-1">Carrinho de compras</p>
                                            <p class="mb-0">Você tem<span class="orange-detail"> 3</span> itens no seu carrinho</p>
                                        </div>
                                        <div>
                                            <p class="mb-0"><span class="text-muted">Organizar:</span> <a href="#!"
                                                class="text-body">preço <i class="fas fa-angle-down mt-1"></i></a></p>
                                        </div>
                                    </div>

                                    <!-- Exemplo de item do carrinho -->
                                    <div class="card mb-3 cart-item" data-price="11.90">
                                        <div class="card-body">
                                            <div class="d-flex justify-content-between">
                                                <div class="d-flex flex-row align-items-center">
                                                    <div>
                                                        <img
                                                            src="https://admin.minikalzone.com.br/uploads/product/5/66aa85eda9b131.25291967.png"
                                                            class="img-fluid rounded-3" alt="Shopping item" style="width: 65px;">
                                                    </div>
                                                    <div class="ms-3">
                                                        <h5 class="orange-detail">Kalzone Frango Catupiry</h5>
                                                        <p class="small mb-0">Frango desfiado, catupiry, molho de tomate</p>
                                                    </div>
                                                </div>
                                                <div class="d-flex flex-row align-items-center">
                                                    <input type="number" class="form-control quantity-input" value="1" min="1" onchange="updateTotal()" style="width: 60px; margin-right: 10px;">
                                                    <div style="width: 110px;">
                                                        <h5 class="mb-0 item-total">R$ 11.90</h5> <!-- Preço total do item -->
                                                    </div>
                                                    <a href="#!" style="color: #cecece;"><i class="fas fa-trash-alt"></i></a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Adicionando mais itens do carrinho -->
                                    <div class="card mb-3 cart-item" data-price="12.90">
                                        <div class="card-body">
                                            <div class="d-flex justify-content-between">
                                                <div class="d-flex flex-row align-items-center">
                                                    <div>
                                                        <img
                                                            src="https://admin.minikalzone.com.br/uploads/product/14/66aa887480d826.23902069.png"
                                                            class="img-fluid rounded-3" alt="Shopping item" style="width: 65px;">
                                                    </div>
                                                    <div class="ms-3">
                                                        <h5 class="orange-detail">Kalzone Brócolis</h5>
                                                        <p class="small mb-0">Brócolis, queijo mussarela, tomate e requeijão</p>
                                                    </div>
                                                </div>
                                                <div class="d-flex flex-row align-items-center">
                                                    <input type="number" class="form-control quantity-input" value="1" min="1" onchange="updateTotal()" style="width: 60px; margin-right: 10px;">
                                                    <div style="width: 110px;">
                                                        <h5 class="mb-0 item-total">R$ 12.90</h5> <!-- Preço total do item -->
                                                    </div>
                                                    <a href="#!" style="color: #cecece;"><i class="fas fa-trash-alt"></i></a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="card mb-3 cart-item" data-price="10.90">
                                        <div class="card-body">
                                            <div class="d-flex justify-content-between">
                                                <div class="d-flex flex-row align-items-center">
                                                    <div>
                                                        <img
                                                            src="https://admin.minikalzone.com.br/uploads/product/23/66aa8c879aa928.73154785.png"
                                                            class="img-fluid rounded-3" alt="Shopping item" style="width: 65px;">
                                                    </div>
                                                    <div class="ms-3">
                                                        <h5 class="orange-detail">Mega Irado</h5>
                                                        <p class="small mb-0">Abaxi, maracujá, suco de laranja, leite e negresco</p>
                                                    </div>
                                                </div>
                                                <div class="d-flex flex-row align-items-center">
                                                    <input type="number" class="form-control quantity-input" value="2" min="1" onchange="updateTotal()" style="width: 60px; margin-right: 10px;">
                                                    <div style="width: 110px;">
                                                        <h5 class="mb-0 item-total">R$ 10.90</h5> <!-- Preço total do item -->
                                                    </div>
                                                    <a href="#!" style="color: #cecece;"><i class="fas fa-trash-alt"></i></a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                                <div class="col-lg-5">
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 class="mb-3">Resumo do Pedido</h5>
                                            <hr>
                                            <div class="d-flex justify-content-between mb-2">
                                                <h6 class="text-muted">Subtotal</h6>
                                                <h6 id="subtotal">R$ 0.00</h6>
                                            </div>
                                            <div class="d-flex justify-content-between mb-2">
                                                <h6 class="text-muted">Taxa de Entrega</h6>
                                                <h6>R$ 0.00</h6>
                                            </div>
                                            <div class="d-flex justify-content-between mb-2">
                                                <h6 class="text-muted">Total</h6>
                                                <h6 id="total">R$ 46.60</h6>
                                            </div>
                                            <button type="button" class="btn btn-warning custom-button">Finalizar Pedido</button>
                                            <hr>
                                            <p class="text-muted">Por favor, revise seu pedido antes de finalizar a compra.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</body>
</html>
